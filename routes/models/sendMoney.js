let find = require('../functional/findUser.js');let balance = require('../functional/balance.js');module.exports = (req,userID,cb)=>{    const semail= req.body.email;    let amt=req.body.amt;    //User Checking    find.findByEmail(semail,(receiver)=>{        if(receiver === null){            let E1=`User Not Found With This E-mail ${semail}`;            cb(E1);        }else {            //checking balance            balance.check(userID,amt,(bInHand)=>{                if(bInHand === null){                    cb("Insufesiant Balance");                }else {                    find.findById(userID,(sender)=>{                        if(sender===null){                            console.log('error in fetching Current user');                        }else{                            //balance Detection                            let t_p = `Sent  Money To ${receiver.fname}`;                            balance.reduceBal(userID,bInHand,amt,t_p,sender.t_tran,(reduction)=>{                                if(reduction === null){                                    cb('Error occurred In Deducting Amount')                                }else{                                    //add balance                                    t_p=`Received  Money From ${sender.fname}`;                                    balance.addBal(receiver.id,amt,t_p,(transOk)=>{                                        if(transOk === null){                                            cb('Error occurred in Adding Amount to the Receiver');                                        }else{                                            console.log('Amount Transferred');                                            cb(undefined,semail);                                        }                                    });                                }                            });                        }                    })                }            });        }    });};